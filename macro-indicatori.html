<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Scrollama: Sticky Side Example</title>
    <meta name="description" content="Scrollama: Sticky Side Example" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link href="./css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/my_style.css" />
    <link rel="stylesheet" href="./css/my_scroll.css"/>
    
    
    
    
    
    <script src=".//js/d3.min.js"></script>
    <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
    <script src=".//js/scrollama.min.js"></script>
    
  </head>

  <body>
   <nav class="navbar fixed-top my-nav">    
    <ul class="nav">           
        <li><a class="menu-text" id="alto-sx" href="index.html">menu</a></li>
        <li>
            <img id="logo" src="./img/log.svg" alt="">
        </li>
        <li><a class="menu-text" id="alto-dx" href="methods.html">about</a></li>
    </ul>    
</nav>

<div class="fixed-bottom bottom-nav">
    <div class="col">
            <img id="arrow-left" src="../img/arrow.svg" alt="">
    </div>
    <div class="col">
        <h3 id="prova">scrolla per continuare</h3>
    </div>       
    <div class="col">
            <img id="arrow-right" src="../img/arrow.svg" alt="">
    </div>
</div>

<div class="container-fluid" style="padding: 0 65 0 65;">
    <div class="row">
       <div class="col">
           <h2>i macro-indicatori</h2>
        </div>
    </div>
<!--
    <div class="row justify-content-center" style="margin-bottom: 50px;">
       <div class="col-9">
           <p style="text-align: center;">Impostando gli indicatori per la distribuzione iniziale, determiniamo su quali territori puntiamo maggiormente ad acquisire clienti tramite il nostro nuovo prodotto. <br>Con il nuovo prodotto <b>Small Ticket</b> puntiamo alle aree del Paese che siano al tempo stesso più ricche ed in cui i nostri competitor sono meno presenti.
           </p>
        </div>
    </div>
-->
    
    <div class="row" style="margin-top: 64px;">                
            <div class="col-4 scenario-box" style="border-left:0px;">
               <div class="row justify-content-center  stroke-box">
                    <div>
                       <h6>innovazione</h6>
                       <p>Innovatività di un territorio in termini di attività di ricerca, privata e pubblica, imprenditorialità, istruzione dei suoi abitanti, utilizzo della tecnologia in ambito privato ed industriale</p>
                    </div>                
                </div>
            </div>
        
        
            <div class="col-4 scenario-box">
               <div class="row justify-content-center stroke-box">
                    <div>
                       <h6 >ricchezza</h6>
                       <p>Ricchezza intrinseca di un territorio, fondata sul reddito delle persone che lo abitano e sulla disponibilità di asset e risorse di valore presenti in esso (abitazioni, attività commerciali, etc…)</p>
                    </div>
                </div>
            </div>
        
        
            <div class="col-4 scenario-box">
               <div class="row justify-content-center stroke-box">
                   <div>
                       <h6>attrattività</h6>
                       <p>Quanto il territorio sia attraente per un lavoratore, in termini di dinamicità e apertura del mercato del lavoro, investimenti, infrastrutture, produttività.</p>
                   </div>
                </div>
            </div>
                    
    </div>
    <div class="row" style="height: 180px;">                
            <div class="col-4 scenario-box" style="border-left:0px;">
               
                <div class="row justify-content-center" style="border-top:0px;">
                    <div>
                       <h6>sicurezza</h6>
                       <p>Grado di sicurezza del territorio, stimato in base ad indici di criminalità ed eventi avversi quali incendi, crolli, incidenti</p>
                    </div>
                </div>
            </div>
        
        
            <div class="col-4 scenario-box">
               <div class="row justify-content-center">
                  <div>
                       <h6>competizione</h6>
                       <p>Quanto è conteso il territorio in termini di concorrenza assicurativa, stimato in base alla densità delle agenzie e degli sportelli bancari che distribuiscono prodotti assicurativi.</p>
                   </div>
                </div>
            </div>
        
        
            <div class="col-4 scenario-box">
              
               <div class="row justify-content-center">
                  <div>
                       <h6>mobilità</h6>
                       <p>Una misura di quanto il territorio sia movimentato in termini di persone e merci, valutato sul numero di veicoli e sui flussi di spostamento in ingresso, in uscita e all’interno del territorio.</p>
                   </div>
                </div>
            </div>  
    </div>
    
    
</div>
   
   
   
   
   
   
    <main>
      
       
       <!--<section id="intro">
        <h1 class="intro__hed">Sticky Side Example</h1>
        <p class="intro__dek">
          Start scrolling to see how it works.
        </p>
      </section>-->

      <section id="scrolly">
        <article>
          <div class="step" data-step="1">
            <h6>COME SONO CALCOLATI I MACRO-INDICATORI?</h6>
            <p>Ogni macro-indicatore è composto da micro-indicatori estratti database Istat e da altri database pubblici.</p>
          </div>
          
          
          <div class="step" data-step="2">
           <p style="margin-bottom: 15px;">Ogni micro-indicatore ha un valore e una polarità:</p>
            <h6>IL COEFFICENTE</h6>
            <div class="block_container">
               <img src="./img/square-size.svg" alt="" style="max-width: 40px; margin-right: 15px;">
                <p>Il coefficente è rappresentato dalla dimensione del rettangolo</p>
            </div>
            <h6 style="margin-top: 15px;">la polarità</h6>
            <div class="row">
                <div class="block_container">
                    <img src="./img/square_pos.svg" alt="" style="min-width: 40px; margin-right: 15px;">
                    <p>valenza positiva</p>                
                </div>
            </div>
            
            <div class="row" style="margin-top: 15px;">
                <div class="block_container">
                    <img src="./img/square_neg.svg" alt="" style="min-width: 40px; margin-right: 15px;">
                    <p>valenza negativa</p>                
                </div>
            </div>
          </div>
          <div class="step" data-step="3">
              <h6>I micro INDICATORI</h6>
              <p>La piattaforma permette di esplorare la struttura dei micro indicatori </p>
          </div>
          <div class="step" data-step="4">
             <h6>I micro INDICATORI</h6>
             <p>Per ogni micro indicatore è possibile esplorare il dettaglio e l'impatto del suo coefficente sul totale del macro-indicatore </p>
            
          </div>
        </article>
        
         <figure>
          <img class="img-scroll-style" src="img/img-scrollitelling/1.svg"/>
        </figure>
      </section>

      <!--<section id="outro"></section>-->
      
      
    </main>
    
<div class="container-fluid">
    
    <div class="row justify-content-center">
        <div class="col">
           <a href="https://tableau-dev.aws.celi.it/#/views/DJViews/TreeMap?:iid=4" class="link-btn">
            <button type="button" class="btn mx-auto d-block my-primary" id="btn-home">               
                Esplora gli indicatori                
            </button>
            </a>
        </div>
        <div class="col">
           <a href="https://tableau-dev.aws.celi.it/#/views/DJViews/DashboardIndicatori?:iid=2" class="link-btn">
            <button type="button" class="btn mx-auto d-block my-primary" id="btn-home">               
                Esplora la dashboard               
            </button>
            </a>
        </div>
    </div>
    
</div>

    
    <script>
      // using d3 for convenience
      var main = d3.select("main");
      var scrolly = main.select("#scrolly");
      var figure = scrolly.select("figure");
      var article = scrolly.select("article");
      var step = article.selectAll(".step")
      // initialize the scrollama
      var scroller = scrollama();
      srcs = [
          "img/img-scrollitelling/1.svg",
          "img/img-scrollitelling/2.svg",
          "img/img-scrollitelling/3.svg",
          "img/img-scrollitelling/4.svg"
      ];

      // generic window resize listener event
      function handleResize() {
        // 1. update height of step elements
        var stepH = Math.floor(window.innerHeight * 0.75);
        step.style("height", stepH + "px");

        var figureHeight = window.innerHeight / 2;
        var figureMarginTop = (window.innerHeight - figureHeight) / 2;

        figure
          .style("height", figureHeight + "px")
          .style("top", figureMarginTop + "px");

        // 3. tell scrollama to update new element dimensions
        scroller.resize();
      }

      // scrollama event handlers
      function handleStepEnter(response) {
        console.log(response);
        // response = { element, direction, index }

        // add color to current step only
        step.classed("is-active", function(d, i) {
          return i === response.index;
        });

        // update graphic based on step
        figure.select("img").attr("src", srcs[response.index]);
      }

      function setupStickyfill() {
        d3.selectAll(".sticky").each(function() {
          Stickyfill.add(this);
        });
      }

      function init() {
        setupStickyfill();

        // 1. force a resize on load to ensure proper dimensions are sent to scrollama
        handleResize();

        // 2. setup the scroller passing options
        // 		this will also initialize trigger observations
        // 3. bind scrollama event handlers (this can be chained like below)
        scroller
          .setup({
            step: "#scrolly article .step",
            offset: 0.53,
            debug: false
          })
          .onStepEnter(handleStepEnter);

        // setup resize event
        window.addEventListener("resize", handleResize);
      }

      // kick things off
      init();
    </script>
  </body>
</html>